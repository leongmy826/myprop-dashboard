<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Easy Property Guide 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;70.0&display=swap" rel="stylesheet">

    <!-- Open Graph / Facebook / LinkedIn / WhatsApp / Telegram Meta Tags -->
    <meta property="og:title" content="Malaysia Property Guide 2025: Smart Investment Choices">
    <meta property="og:description" content="Your easy guide to smart property choices in Malaysia for living or investing. Get top picks, market info, and expert advice.">
    <meta property="og:image" content="https://placehold.co/1200x630/A88B79/FFFFFF?text=Property+Guide+2025">
    <meta property="og:url" content="https://yourwebsite.com/property-guide-2025">
    <meta property="og:type" content="website">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Malaysia Property Guide 2025: Smart Investment Choices">
    <meta name="twitter:description" content="Your easy guide to smart property choices in Malaysia for living or investing. Get top picks, market info, and expert advice.">
    <meta name="twitter:image" content="https://placehold.co/1200x675/A88B79/FFFFFF?text=Property+Guide+2025">
    <!-- Optional: twitter:site, twitter:creator for Twitter handle -->

    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: A simple, multi-section, single-page app for easy exploration. It includes: 1. Header Disclaimer Banner. 2. Subscribe Section (start page, with a simple form and community links). 3. Market Overview to show key economic numbers and big projects. 4. Property Ideas section to help users find specific details. 5. Agent Chat for quick questions and agent follow-up. 6. A short summary at the end. 7. Footer with a repeated short message and a spot for legal numbers. This design makes it easy for anyone to find info, connect with us, and get answers, all while meeting legal rules. -->
    <!-- Visualization & Content Choices: 
        - Header Disclaimer: Simple text banner.
        - Subscribe Section: Clear main message, simple list of benefits with basic icons, an easy-to-use form (with a note about saving contact info), and direct links to Telegram/WhatsApp.
        - Market Overview -> Goal: Inform -> Viz: Easy-to-read number cards.
        - Infrastructure Projects -> Goal: Show connections -> Viz: Clickable city boxes to reveal project info.
        - Property Recommendations -> Goal: Compare/Detail -> Viz: Simple cards that open to show more details. New: AI-generated extra insights.
        - Agent Chat -> Goal: Help quickly/get leads -> Viz: A simple chat window with an input, send button, and a "Talk to a Human" option (which opens a contact form).
        - Footer: Simple text repeating the disclaimer and showing a placeholder for legal numbers.
        Justification: All choices focus on making information super easy to grasp and interact with. AI parts give quick, smart answers. The forms and links help users connect with us easily. Disclaimers keep us honest and legal. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF7;
            color: #4A4A4A;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px; /* Max width for larger screens */
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Base height for charts */
            max-height: 400px; /* Max height for charts */
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px; /* Taller charts on desktop */
            }
        }
        .nav-button {
            transition: all 0.3s ease;
        }
        .nav-button.active {
            background-color: #A88B79;
            color: #FFFFFF;
        }
        .property-card {
            transition: all 0.3s ease;
            transform: translateY(0);
        }
        .property-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #A88B79;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
        .btn-primary {
            background-color: #A88B79; /* Warm accent color */
            color: #FFFFFF;
            transition: background-color 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #8D6E63; /* Darker warm accent on hover */
        }
        input[type="text"],
        input[type="email"],
        textarea {
            border-color: #E5E7EB; /* Light border for inputs */
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        input[type="text"]:focus,
        input[type="email"]:focus,
        textarea:focus {
            border-color: #A88B79;
            box-shadow: 0 0 0 3px rgba(168, 139, 121, 0.2); /* Subtle focus ring */
            outline: none;
        }

        /* Chat specific styles */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 500px; /* Fixed height for chat display */
            border: 1px solid #E5E7EB;
            border-radius: 0.75rem;
            overflow: hidden;
            background-color: #FFFFFF;
        }
        .chat-display {
            flex-grow: 1;
            padding: 1rem;
            overflow-y: auto;
            background-color: #FDFBF7;
        }
        .chat-message {
            margin-bottom: 0.75rem;
            display: flex;
        }
        .chat-message.user {
            justify-content: flex-end;
        }
        .chat-message.bot {
            justify-content: flex-start;
        }
        .chat-bubble {
            max-width: 80%;
            padding: 0.75rem 1rem;
            border-radius: 1.25rem;
            line-height: 1.4;
        }
        .chat-bubble.user {
            background-color: #A88B79;
            color: white;
            border-bottom-right-radius: 0.25rem;
        }
        .chat-bubble.bot {
            background-color: #E0E0E0;
            color: #4A4A4A;
            border-bottom-left-radius: 0.25rem;
        }
        .chat-input-area {
            display: flex;
            padding: 1rem;
            border-top: 1px solid #E5E7EB;
            background-color: #FFFFFF;
        }
        .chat-input-area input {
            flex-grow: 1;
            margin-right: 0.75rem;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header Disclaimer Banner -->
    <div class="bg-amber-100 text-amber-800 text-center py-3 px-4 text-sm font-semibold sticky top-0 z-50 shadow-sm">
        AI insights are for ideas only — please check with a licensed property agent (REN/PEA).
    </div>

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <header class="text-center mb-12">
            <h1 class="text-3xl md:text-5xl font-bold text-[#A88B79] mb-2">Malaysia Property Guide 2025</h1>
            <p class="text-lg text-gray-600 max-w-3xl mx-auto">Your easy guide to smart property choices in Malaysia for living or investing.</p>
        </header>

        <nav class="flex flex-wrap justify-center gap-2 mb-12 bg-white/50 backdrop-blur-sm p-2 rounded-xl shadow-sm border border-gray-200 sticky top-4 z-50">
            <button data-target="subscribe" class="nav-button active px-3 py-2 text-sm sm:text-base font-medium text-gray-700 rounded-lg">Join Us</button>
            <button data-target="market" class="nav-button px-3 py-2 text-sm sm:text-base font-medium text-gray-700 rounded-lg">Market Info</button>
            <button data-target="recommendations" class="nav-button px-3 py-2 text-sm sm:text-base font-medium text-gray-700 rounded-lg">Property Ideas</button>
            <!-- Removed Compare Deals Button -->
            <!-- Removed AI Market Chat Button -->
            <button data-target="agent-chat" class="nav-button px-3 py-2 text-sm sm:text-base font-medium text-gray-700 rounded-lg">Ask Agent</button>
            <button data-target="conclusion" class="nav-button px-3 py-2 text-sm sm:text-base font-medium text-gray-700 rounded-lg">Summary</button>
        </nav>

        <main>
            <!-- Subscribe Section (with Landing Form and Community Links) -->
            <section id="subscribe" class="content-section active">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
                    <!-- Hero Section -->
                    <section class="text-center mb-16">
                        <h1 class="text-4xl md:text-6xl font-bold text-[#A88B79] leading-tight mb-4">Get Our Best Property Tips!</h1>
                        <p class="text-lg md:text-xl text-gray-600 max-w-3xl mx-auto">Sign up for our newsletter to get top property deals, market news, and expert advice straight to your inbox.</p>
                    </section>

                    <!-- Features Section -->
                    <section class="mb-16 max-w-4xl mx-auto">
                        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 text-center mb-8">What You'll Get:</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                            <div class="flex flex-col items-center text-center p-6 bg-white rounded-xl shadow-md border border-gray-100">
                                <span class="text-5xl mb-4">📈</span>
                                <h3 class="text-xl font-semibold text-gray-700 mb-2">Market Updates</h3>
                                <p class="text-gray-600">Get the latest on property prices, rental income, and economic forecasts.</p>
                            </div>
                            <div class="flex flex-col items-center text-center p-6 bg-white rounded-xl shadow-md border border-gray-100">
                                <span class="text-5xl mb-4">📍</span>
                                <h3 class="text-xl font-semibold text-gray-700 mb-2">Best Property Picks</h3>
                                <p class="text-gray-600">We pick the best properties for you, whether you want to live in them or rent them out.</p>
                            </div>
                            <div class="flex flex-col items-center text-center p-6 bg-white rounded-xl shadow-md border border-gray-100">
                                <span class="text-5xl mb-4">💡</span>
                                <h3 class="text-xl font-semibold text-gray-700 mb-2">Expert Advice</h3>
                                <p class="text-gray-600">Learn from property pros about long-term value and making money from rentals.</p>
                            </div>
                        </div>
                    </section>

                    <!-- Landing Form Section -->
                    <section class="bg-white p-8 md:p-12 rounded-2xl shadow-xl border border-gray-100 max-w-2xl mx-auto">
                        <h2 class="text-2xl md:text-3xl font-bold text-gray-800 text-center mb-6">Join Our Group</h2>
                        <p class="text-gray-600 text-center mb-8">Sign up today to make smarter property choices.</p>
                        
                        <form id="subscription-form" class="space-y-6 mb-8">
                            <div>
                                <label for="name" class="block text-gray-700 text-sm font-medium mb-2">Your Name</label>
                                <input type="text" id="name" name="name" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#A88B79]" placeholder="John Doe" required>
                            </div>
                            <div>
                                <label for="email" class="block text-gray-700 text-sm font-medium mb-2">Your Email</label>
                                <input type="email" id="email" name="email" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#A88B79]" placeholder="john.doe@example.com" required>
                                <p class="text-xs text-gray-500 mt-1">We'll save your email safely in our system (like Zoho).</p>
                            </div>
                            <button type="submit" class="btn-primary w-full py-3 rounded-lg font-semibold text-lg flex items-center justify-center">
                                <span id="form-spinner" class="spinner hidden mr-2"></span>
                                Sign Up Now
                            </button>
                            <div id="form-message" class="mt-4 text-center text-sm font-medium"></div>
                        </form>

                        <div class="text-center">
                            <p class="text-gray-700 mb-4">Or chat with us directly:</p>
                            <div class="flex flex-col sm:flex-row justify-center gap-4">
                                <a href="https://t.me/yourpropertycommunity" target="_blank" class="flex items-center justify-center bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-600 transition-colors w-full sm:w-auto">
                                    <span class="text-2xl mr-2">✈️</span> Join Telegram
                                </a>
                                <a href="https://chat.whatsapp.com/yourwhatsappgroup" target="_blank" class="flex items-center justify-center bg-green-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-600 transition-colors w-full sm:w-auto">
                                    <span class="text-2xl mr-2">💬</span> Join WhatsApp
                                </a>
                            </div>
                            <p class="text-gray-500 text-xs mt-4">*(These are example links. Please change them to your real community links)*</p>
                        </div>
                    </section>
                </div>
            </section>

            <section id="market" class="content-section">
                <div class="text-center mb-10">
                    <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-2">Market Snapshot 2025</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto">Good economy and new projects are boosting property values. See the main numbers for 2025.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                    <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100 text-center">
                        <div class="text-4xl mb-2">📈</div>
                        <h3 class="text-lg font-semibold text-gray-700">Economy Growth</h3>
                        <p class="text-3xl font-bold text-[#A88B79]">4.4%</p>
                        <p class="text-sm text-gray-500">(Early 2025)</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100 text-center">
                        <div class="text-4xl mb-2">🏦</div>
                        <h3 class="text-lg font-semibold text-gray-700">Interest Rate</h3>
                        <p class="text-3xl font-bold text-[#A88B79]">3.00%</p>
                        <p class="text-sm text-gray-500">(Steady)</p>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100 text-center">
                         <div class="text-4xl mb-2">🏘️</div>
                        <h3 class="text-lg font-semibold text-gray-700">Rental Prices</h3>
                        <p class="text-3xl font-bold text-[#A88B79]">Going Up</p>
                        <p class="text-sm text-gray-500">(More people renting)</p>
                    </div>
                </div>

                <div class="bg-white p-6 sm:p-8 rounded-xl shadow-lg border border-gray-100">
                    <h3 class="text-xl md:text-2xl font-bold text-center text-gray-800 mb-2">Big Projects Boosting Cities</h3>
                    <p class="text-center text-gray-600 mb-8">Click a city to see how new projects are making it better and increasing property value.</p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                        <div class="city-info-trigger p-4 border-2 border-transparent rounded-lg cursor-pointer hover:bg-amber-50" data-city="kl">
                            <span class="text-5xl">🏙️</span>
                            <h4 class="font-bold text-xl mt-2 text-gray-800">Kuala Lumpur</h4>
                            <p class="text-gray-500">Better Transport</p>
                        </div>
                         <div class="city-info-trigger p-4 border-2 border-transparent rounded-lg cursor-pointer hover:bg-amber-50" data-city="jb">
                            <span class="text-5xl">🌉</span>
                            <h4 class="font-bold text-xl mt-2 text-gray-800">Johor Bahru</h4>
                            <p class="text-gray-500">Link to Singapore</p>
                        </div>
                         <div class="city-info-trigger p-4 border-2 border-transparent rounded-lg cursor-pointer hover:bg-amber-50" data-city="penang">
                            <span class="text-5xl">🏝️</span>
                            <h4 class="font-bold text-xl mt-2 text-gray-800">Penang</h4>
                            <p class="text-gray-500">New Tech Hub</p>
                        </div>
                    </div>
                    <div id="city-info-display" class="mt-8 p-6 bg-[#FDFBF7] rounded-lg border border-gray-200 transition-all duration-500 ease-in-out opacity-0 h-0 overflow-hidden">
                        <h5 id="info-title" class="text-lg font-bold text-[#A88B79]"></h5>
                        <p id="info-description" class="text-gray-700 mt-2"></p>
                    </div>
                </div>
            </section>

            <section id="recommendations" class="content-section">
                 <div class="text-center mb-10">
                    <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-2">Our Top Property Ideas</h2>
                    <p class="text-gray-600 max-w-3xl mx-auto">Check out 3 great properties. Each is chosen for its good location, quality, and potential to make you money. Click a card for more details.</p>
                </div>
                <div id="property-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                </div>
            </section>
            
            <div id="property-modal" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden flex items-center justify-center p-4">
                <div id="modal-content" class="bg-white w-full max-w-4xl max-h-[90vh] rounded-2xl shadow-2xl p-6 sm:p-8 relative overflow-y-auto">
                </div>
            </div>

            <!-- Removed Compare Deals Section -->

            <!-- Removed Market Insights Section -->

            <!-- Agent Chat Section -->
            <section id="agent-chat" class="content-section">
                <div class="text-center mb-10">
                    <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-2">Chat with Our AI Helper 🤖</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto">Ask quick questions about properties or investing. If you need more help, you can ask for a human agent to call you back.</p>
                </div>
                <div class="bg-white p-6 sm:p-8 rounded-xl shadow-lg border border-gray-100 max-w-3xl mx-auto">
                    <div class="chat-container mb-4">
                        <div id="chat-display" class="chat-display">
                            <div class="chat-message bot">
                                <div class="chat-bubble bot">Hi! How can I help you with Malaysian property questions today?</div>
                            </div>
                        </div>
                        <div class="chat-input-area">
                            <input type="text" id="chat-input" class="p-3 border rounded-lg focus:ring-2 focus:ring-[#A88B79]" placeholder="Type your message...">
                            <button id="send-chat-btn" class="btn-primary px-4 py-2 rounded-lg font-semibold flex items-center justify-center">
                                <span id="chat-spinner" class="spinner hidden mr-2"></span>
                                Send
                            </button>
                        </div>
                    </div>

                    <div id="agent-follow-up-section" class="hidden mt-6 p-6 bg-[#FDFBF7] border border-gray-200 rounded-lg">
                        <h3 class="text-xl font-bold text-gray-800 text-center mb-4">Ask a Human Agent to Call You</h3>
                        <p class="text-gray-600 text-center mb-6">Looks like you need more personal help. Please share your details, and a property agent will contact you soon.</p>
                        <form id="follow-up-form" class="space-y-4">
                            <div>
                                <label for="follow-up-name" class="block text-gray-700 text-sm font-medium mb-2">Your Name</label>
                                <input type="text" id="follow-up-name" name="name" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#A88B79]" required>
                            </div>
                            <div>
                                <label for="follow-up-email" class="block text-gray-700 text-sm font-medium mb-2">Your Email</label>
                                <input type="email" id="follow-up-email" name="email" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#A88B79]" required>
                            </div>
                            <div>
                                <label for="follow-up-phone" class="block text-gray-700 text-sm font-medium mb-2">Phone Number</label>
                                <input type="text" id="follow-up-phone" name="phone" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#A88B79]">
                            </div>
                            <div>
                                <label for="follow-up-message" class="block text-gray-700 text-sm font-medium mb-2">What you need help with</label>
                                <textarea id="follow-up-message" name="message" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-[#A88B79] h-24 resize-y"></textarea>
                            </div>
                            <button type="submit" class="btn-primary w-full py-3 rounded-lg font-semibold flex items-center justify-center">
                                <span id="follow-up-spinner" class="spinner hidden mr-2"></span>
                                Send Request
                            </button>
                            <div id="follow-up-message-output" class="mt-4 text-center text-sm font-medium"></div>
                        </form>
                    </div>
                    <button id="request-agent-btn" class="btn-primary w-full py-3 rounded-lg font-semibold mt-4 hidden">
                        Ask for a Human Agent 🤝
                    </button>
                </div>
            </section>
            
            <section id="conclusion" class="content-section">
                 <div class="text-center mb-10">
                    <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-2">Key Takeaways for Smart Investing</h2>
                     <p class="text-gray-600 max-w-3xl mx-auto">Simple tips for making good property choices in Malaysia for 2025.</p>
                </div>
                <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-100 max-w-4xl mx-auto space-y-6">
                    <div>
                        <h3 class="text-xl font-semibold text-[#A88B79] mb-2 flex items-center"><span class="text-2xl mr-3">📍</span>Invest Where Growth Is Happening</h3>
                        <p class="text-gray-700">Properties near big new projects (like LRT3, RTS Link, Mutiara Line) are set to grow the most. Investing here means you're betting on government-backed growth.</p>
                    </div>
                    <hr class="border-gray-200">
                    <div>
                         <h3 class="text-xl font-semibold text-[#A88B79] mb-2 flex items-center"><span class="text-2xl mr-3">💼</span>Look for Well-Managed Properties with Good Facilities</h3>
                         <p class="text-gray-700">People want places where they can live, work, and play easily. Properties with good facilities and professional management attract better renters and keep their value.</p>
                    </div>
                     <hr class="border-gray-200">
                    <div>
                         <h3 class="text-xl font-semibold text-[#A88B79] mb-2 flex items-center"><span class="text-2xl mr-3">💰</span>Use Good Loan Rates to Your Advantage</h3>
                         <p class="text-gray-700">With steady interest rates and rising rental prices, 2025 is a good time to buy. Our recommended properties show you can make more from rent than your loan payment.</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="text-center mt-16 text-gray-500 text-sm">
            <p class="mb-2">Disclaimer: AI insights are for ideas only — please check with a licensed property agent (REN/PEA).</p>
            <p>&copy; 2025 Property Insights Malaysia. All rights reserved.</p>
            <p class="mt-1">APDL No.: [Insert APDL Number Here for Actual Projects]</p>
            <div class="flex flex-col sm:flex-row justify-center gap-4 mt-2">
                <a href="https://t.me/yourpropertycommunity" target="_blank" class="text-blue-500 hover:underline">Telegram Community</a>
                <a href="https://chat.whatsapp.com/yourwhatsappgroup" target="_blank" class="text-green-500 hover:underline">WhatsApp Group</a>
            </div>
        </footer>

    </div>

<script>
document.addEventListener('DOMContentLoaded', function() {

    const propertyData = [
        {
            id: 'uptown',
            name: 'Uptown Residences',
            city: 'Kuala Lumpur',
            location: 'Damansara Utama',
            price: 595000,
            type: 'Serviced Apartment',
            icon: '🏙️',
            yield: 5.83,
            rent: 2900,
            mortgage: 2875,
            gap: 25,
            rationale: {
                suitability: 'Great for living in or renting out. It\'s in a busy area with lots of offices, attracting working people and foreigners. Its smaller size fits what people want now.',
                developer: 'Built by See Hoy Chan Sdn. Berhad Group, a trusted company with over 60 years of experience. They are known for good quality and taking care of their properties, which helps keep its value high.',
                accessibility: 'Super easy to get around. The new LRT3 train line (opening Sep 2025) will have a station nearby, making travel much faster and boosting rental demand.',
                community: 'A well-known, safe, and lively area with great places like One Utama Shopping Centre. The area is clean and well-kept, making it a nice place to live.',
                safety: 'Very safe. The building has its own security, and the local police patrol the wider area 24/7.',
                cashflow: 'Expected to make good rental money. The new LRT3 train line will likely push rental prices even higher.',
                opportunity: 'Buying now, before the new train line fully opens, gives you a chance to see your property value go up a lot. It\'s in an older area with limited new homes, which also helps its value.'
            }
        },
        {
            id: 'twin',
            name: 'Twin Tower Residence',
            city: 'Johor Bahru',
            location: 'Bukit Chagar',
            price: 700000,
            type: 'Serviced Apartment',
            icon: '🌉',
            yield: 6.86,
            rent: 4000,
            mortgage: 3385,
            gap: 615,
            rationale: {
                suitability: 'Perfect for people who work in Singapore and travel back and forth, or for high rental income. It\'s super close to the border, so many people will want to rent here.',
                developer: 'Built by SKS Group, a big company that builds hotels and malls. They know how to build quality places, which is good for long-term value.',
                accessibility: 'You can\'t get closer to Singapore. It\'s the closest condo to the JB border checkpoint and will be next to the new RTS Link train station, getting you to Singapore in 5 minutes.',
                community: 'This area is changing fast because of the new RTS train and the Johor-Singapore Special Economic Zone. It\'s near big malls, food spots, and is planned to be a full living hub.',
                safety: 'Has strong security inside. The area also has a lot of police because it\'s a border city, making it safe. New plans for the area also focus on safety.',
                cashflow: 'Expected to make excellent rental money. Many Malaysians working in Singapore will keep demand high. You could get one of the highest rental returns here.',
                opportunity: 'This is a top chance to invest before the RTS Link train fully opens in 2026. This train will greatly change travel to Singapore, making property values here jump. New jobs from the economic zone will also help.'
            }
        },
        {
            id: 'iconic',
            name: 'Iconic Regency',
            city: 'Penang',
            location: 'Bayan Lepas',
            price: 580000,
            type: 'Serviced Residence',
            icon: '🏝️',
            yield: 6.21,
            rent: 3000,
            mortgage: 2805,
            gap: 195,
            rationale: {
                suitability: 'Great for working people near the Bayan Lepas industrial area and airport. The fully furnished units with resort-style facilities are perfect for living or renting out.',
                developer: 'Built by Iconic Development Sdn Bhd and managed by hotel professionals. Reviews say it\'s clean, comfy, and well-run, which is key for a serviced apartment.',
                accessibility: 'Very easy to get to Penang Airport and the Bayan Lepas industrial zone (FIZ). The new Mutiara Line LRT train, now being built, will pass through here, making travel even easier.',
                community: 'A busy area that will grow even more with the new "Silicon Island" project. You\'ll find plenty of local food and shops nearby. There\'s a police station right across the street.',
                safety: 'Has 24-hour security. The police station nearby also adds to the safety of the area. People say it feels very safe and clean.',
                cashflow: 'Strong rental income expected from workers in the nearby industrial zone and airport. Being fully furnished makes it easy to rent out quickly.',
                opportunity: 'Investing now means you get in early on the growth from the new Mutiara Line LRT and the huge "Silicon Island" project. This project will create many jobs, driving up demand for homes.'
            }
        }
    ];

    const cityInfo = {
        kl: {
            title: 'LRT Shah Alam Line (LRT3)',
            description: 'This new train line opens by September 2025. It\'s 37.8km long and will connect busy areas like Bandar Utama, Shah Alam, and Klang. It will help ease traffic and boost business around its 25 stations.'
        },
        jb: {
            title: 'Johor Bahru-Singapore RTS Link',
            description: 'Train testing starts late 2025 for this 4km link. It will connect Johor Bahru to Singapore in just five minutes. This will greatly reduce traffic at the Causeway and make properties near the Bukit Chagar station much more valuable.'
        },
        penang: {
            title: 'Mutiara Line LRT & Silicon Island',
            description: 'Construction started in January 2025 for this new train line connecting George Town to Bayan Lepas. At the same time, "Silicon Island" is being built to create a new tech hub with about 220,000 jobs. Both projects will greatly increase demand for homes and boost the economy.'
        }
    };

    const navButtons = document.querySelectorAll('.nav-button');
    const contentSections = document.querySelectorAll('.content-section');

    navButtons.forEach(button => {
        button.addEventListener('click', () => {
            navButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');

            const targetId = button.dataset.target;
            contentSections.forEach(section => {
                if (section.id === targetId) {
                    section.classList.add('active');
                } else {
                    section.classList.remove('active');
                }
            });
        });
    });

    const cityTriggers = document.querySelectorAll('.city-info-trigger');
    const infoDisplay = document.getElementById('city-info-display');
    const infoTitle = document.getElementById('info-title');
    const infoDescription = document.getElementById('info-description');
    let activeCity = null;
    
    cityTriggers.forEach(trigger => {
        trigger.addEventListener('click', () => {
            const cityKey = trigger.dataset.city;
            
            cityTriggers.forEach(t => t.classList.remove('border-amber-400', 'bg-amber-50'));
            trigger.classList.add('border-amber-400', 'bg-amber-50');

            if (activeCity === cityKey) {
                infoDisplay.style.height = '0';
                infoDisplay.style.opacity = '0';
                infoDisplay.style.padding = '0';
                activeCity = null;
                 trigger.classList.remove('border-amber-400', 'bg-amber-50');
            } else {
                infoTitle.textContent = cityInfo[cityKey].title;
                infoDescription.textContent = cityInfo[cityKey].description;
                infoDisplay.style.height = infoDisplay.scrollHeight + 'px';
                infoDisplay.style.opacity = '1';
                infoDisplay.style.padding = '1.5rem';
                activeCity = cityKey;
            }
        });
    });


    const propertyGrid = document.getElementById('property-grid');
    propertyData.forEach(prop => {
        const card = document.createElement('div');
        card.className = 'property-card bg-white rounded-xl shadow-md border border-gray-100 overflow-hidden cursor-pointer';
        card.innerHTML = `
            <div class="p-6">
                <div class="flex justify-between items-start">
                    <div>
                        <p class="text-sm font-medium text-[#A88B79]">${prop.city}</p>
                        <h3 class="text-xl font-bold text-gray-800">${prop.name}</h3>
                    </div>
                    <div class="text-4xl">${prop.icon}</div>
                </div>
                <p class="text-gray-600 mt-2">${prop.type}</p>
                <div class="mt-4 pt-4 border-t border-gray-200 flex justify-between items-center">
                    <div>
                        <p class="text-sm text-gray-500">Price (2025)</p>
                        <p class="text-lg font-semibold text-gray-800">MYR ${prop.price.toLocaleString()}</p>
                    </div>
                    <div class="text-right">
                        <p class="text-sm text-gray-500">Money Left Over</p>
                        <p class="text-lg font-bold ${prop.gap > 0 ? 'text-green-600' : 'text-red-600'}">MYR ${prop.gap.toLocaleString()}</p>
                    </div>
                </div>
            </div>
            <div class="bg-gray-50 px-6 py-3 text-center text-sm font-medium text-[#A88B79] hover:bg-amber-100">
                See Details
            </div>
        `;
        card.addEventListener('click', () => openModal(prop.id));
        propertyGrid.appendChild(card);
    });

    const modal = document.getElementById('property-modal');
    const modalContent = document.getElementById('modal-content');
    
    async function callGeminiAPI(prompt, outputElement, spinnerElement, chatHistory = []) {
        outputElement.textContent = '';
        spinnerElement.classList.remove('hidden');

        try {
            const payload = { contents: chatHistory.concat([{ role: "user", parts: [{ text: prompt }] }]) };
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            const result = await response.json();

            if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                const text = result.candidates[0].content.parts[0].text;
                outputElement.textContent = text;
                return text; // Return the generated text for chat history
            } else {
                outputElement.textContent = 'Error: Could not get a valid response from the AI. Please try again.';
                return null;
            }
        } catch (error) {
            console.error('Gemini API call failed:', error);
            outputElement.textContent = 'Error: Failed to connect to the AI service. Please check your network connection.';
            return null;
        } finally {
            spinnerElement.classList.add('hidden');
        }
    }

    function openModal(id) {
        const prop = propertyData.find(p => p.id === id);
        modalContent.innerHTML = `
            <button id="close-modal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                    <span class="text-6xl">${prop.icon}</span>
                    <h2 class="text-3xl font-bold text-gray-800 mt-4">${prop.name}</h2>
                    <p class="text-lg text-[#A88B79] font-medium">${prop.city}, ${prop.location}</p>
                    <div class="mt-6 space-y-4">
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full bg-green-100 text-green-700 flex items-center justify-center text-xl mr-4">💰</div>
                            <div>
                                <p class="text-sm text-gray-500">Money Left Over</p>
                                <p class="font-bold text-gray-800">MYR ${prop.gap.toLocaleString()} / month</p>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center text-xl mr-4">📈</div>
                            <div>
                                <p class="text-sm text-gray-500">Est. Rental Income</p>
                                <p class="font-bold text-gray-800">${prop.yield}%</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="space-y-4">
                     ${Object.entries(prop.rationale).map(([key, value]) => `
                        <div>
                            <h4 class="font-semibold text-gray-700 capitalize">${key.replace(/([A-Z])/g, ' $1')}</h4>
                            <p class="text-gray-600 text-sm">${value}</p>
                        </div>
                    `).join('')}
                    <div class="mt-6 pt-6 border-t border-gray-200">
                        <h4 class="font-semibold text-gray-700 mb-3">More Investment Insights</h4>
                        <button id="get-deeper-insight-btn" class="w-full bg-[#A88B79] text-white py-2 rounded-lg font-semibold hover:bg-[#8D6E63] transition-colors flex items-center justify-center">
                            <span id="insight-spinner" class="spinner hidden mr-2"></span>
                            Get More AI Info ✨
                        </button>
                        <div id="deeper-insight-output" class="mt-4 p-3 bg-[#FDFBF7] border border-gray-200 rounded-lg text-gray-700 text-sm min-h-[80px] flex items-center justify-center text-center">
                            Click above for more detailed analysis.
                        </div>
                    </div>
                </div>
            </div>
        `;
        modal.classList.remove('hidden');
        document.getElementById('close-modal').addEventListener('click', () => modal.classList.add('hidden'));

        document.getElementById('get-deeper-insight-btn').addEventListener('click', () => {
            const prompt = `As a Malaysian property specialist, provide a more in-depth investment outlook for a property with the following details, focusing on unique selling points, long-term appreciation factors, and potential risks. Property Name: ${prop.name}, Location: ${prop.location}, Type: ${prop.type}, Target Price: MYR ${prop.price}. Initial Rationale: Suitability: ${prop.rationale.suitability}. Opportunity: ${prop.rationale.opportunity}.`;
            callGeminiAPI(prompt, document.getElementById('deeper-insight-output'), document.getElementById('insight-spinner'));
        });
    }
    
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.classList.add('hidden');
        }
    });

    // Removed Chart.js related code as the section is removed
    // const ctx = document.getElementById('comparisonChart').getContext('2d');
    // let comparisonChart;
    // const chartMetrics = { ... };
    // const comparisonInsightsOutput = document.getElementById('comparison-insights-output');
    // const comparisonInsightsSpinner = document.getElementById('comparison-insights-spinner');
    // async function generateComparisonInsights(metric) { ... }
    // function createOrUpdateChart(metric) { ... }
    // createOrUpdateChart('yield');
    // document.querySelectorAll('.comparison-btn').forEach(btn => { ... });


    // Removed Market Trend Analysis LLM Integration (AI Market Chat)
    // const trendQueryInput = document.getElementById('trend-query-input');
    // const analyzeTrendsBtn = document.getElementById('analyze-trends-btn');
    // const analyzeTrendsSpinner = document.getElementById('analyze-trends-spinner');
    // const trendAnalysisOutput = document.getElementById('trend-analysis-output');
    // analyzeTrendsBtn.addEventListener('click', () => { ... });


    // Landing Form JavaScript
    const form = document.getElementById('subscription-form');
    const formMessage = document.getElementById('form-message');
    const formSpinner = document.getElementById('form-spinner');

    form.addEventListener('submit', function(event) {
        event.preventDefault(); // Stop the form from sending normally

        formSpinner.classList.remove('hidden');
        form.querySelector('button[type="submit"]').disabled = true;
        formMessage.textContent = '';
        formMessage.classList.remove('text-green-600', 'text-red-600');

        // Pretend to send data (like to Zoho CRM)
        setTimeout(() => {
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;

            if (name && email) {
                formMessage.textContent = `Thanks, ${name}! You're signed up with ${email}. Your info is safe with us (like in Zoho CRM).`;
                formMessage.classList.add('text-green-600');
                form.reset(); // Clear the form
            } else {
                formMessage.textContent = 'Please fill in your name and email.';
                formMessage.classList.add('text-red-600');
            }

            formSpinner.classList.add('hidden');
            form.querySelector('button[type="submit"]').disabled = false;
        }, 1500); // Wait 1.5 seconds to show it's "working"
    });

    // Agent Chatbot JavaScript
    const chatDisplay = document.getElementById('chat-display');
    const chatInput = document.getElementById('chat-input');
    const sendChatBtn = document.getElementById('send-chat-btn');
    const chatSpinner = document.getElementById('chat-spinner');
    const requestAgentBtn = document.getElementById('request-agent-btn');
    const agentFollowUpSection = document.getElementById('agent-follow-up-section');
    const followUpForm = document.getElementById('follow-up-form');
    const followUpSpinner = document.getElementById('follow-up-spinner');
    const followUpMessageOutput = document.getElementById('follow-up-message-output');

    let agentChatHistory = []; // Stores chat history for the agent bot

    function displayChatMessage(sender, message) {
        const messageDiv = document.createElement('div');
        messageDiv.classList.add('chat-message', sender);
        const bubbleDiv = document.createElement('div');
        bubbleDiv.classList.add('chat-bubble', sender);
        bubbleDiv.textContent = message;
        messageDiv.appendChild(bubbleDiv);
        chatDisplay.scrollTop = chatDisplay.scrollHeight; // Auto-scroll to bottom
    }

    async function handleChatInput() {
        const userMessage = chatInput.value.trim();
        if (!userMessage) return;

        displayChatMessage('user', userMessage);
        agentChatHistory.push({ role: 'user', parts: [{ text: userMessage }] });
        chatInput.value = ''; // Clear input immediately

        // Keywords to trigger agent follow-up
        const agentKeywords = ['human', 'call', 'contact', 'more help', 'talk to someone', 'sales', 'appointment'];
        const needsAgent = agentKeywords.some(keyword => userMessage.toLowerCase().includes(keyword));

        if (needsAgent) {
            displayChatMessage('bot', "Sounds like you need a human agent. Please click 'Ask for a Human Agent' below, and we'll connect you.");
            requestAgentBtn.classList.remove('hidden');
            agentChatHistory.push({ role: 'model', parts: [{ text: "Sounds like you need a human agent. Please click 'Ask for a Human Agent' below, and we'll connect you." }] });
            return;
        }

        const botPrompt = `You are an AI property assistant for a Malaysian real estate company. Answer the user's question simply and clearly about property. If they ask for direct contact or complex financial advice, tell them to use the "Ask for a Human Agent" button. User: "${userMessage}"`;
        
        const botResponse = await callGeminiAPI(botPrompt, chatDisplay, chatSpinner, agentChatHistory);
        if (botResponse) {
            displayChatMessage('bot', botResponse);
            agentChatHistory.push({ role: 'model', parts: [{ text: botResponse }] });
            // Re-check if bot's response also suggests agent follow-up
            if (agentKeywords.some(keyword => botResponse.toLowerCase().includes(keyword))) {
                 requestAgentBtn.classList.remove('hidden');
            } else {
                 requestAgentBtn.classList.add('hidden');
            }
        }
    }

    sendChatBtn.addEventListener('click', handleChatInput);
    chatInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            handleChatInput();
        }
    });

    requestAgentBtn.addEventListener('click', () => {
        document.getElementById('chat-input-area').classList.add('hidden'); // Hide chat input
        requestAgentBtn.classList.add('hidden'); // Hide the request agent button
        agentFollowUpSection.classList.remove('hidden'); // Show the follow-up form
        // Pre-fill message with last few chat messages if possible
        const lastMessages = agentChatHistory.slice(Math.max(0, agentChatHistory.length - 4)).map(msg => `${msg.role === 'user' ? 'You' : 'Agent'}: ${msg.parts[0].text}`).join('\n');
        document.getElementById('follow-up-message').value = `About my chat: \n${lastMessages}\n\n[Please write your specific question here]`;
    });

    followUpForm.addEventListener('submit', function(event) {
        event.preventDefault(); // Stop the form from sending normally

        followUpSpinner.classList.remove('hidden');
        followUpForm.querySelector('button[type="submit"]').disabled = true;
        followUpMessageOutput.textContent = '';
        followUpMessageOutput.classList.remove('text-green-600', 'text-red-600');

        setTimeout(() => {
            const name = document.getElementById('follow-up-name').value;
            const email = document.getElementById('follow-up-email').value;
            const phone = document.getElementById('follow-up-phone').value;
            const message = document.getElementById('follow-up-message').value;

            if (name && email) {
                // Pretend to send data to a CRM
                followUpMessageOutput.textContent = `Thanks, ${name}! Your request is sent. An agent will contact you at ${email} (or ${phone}) soon. This data would go to our CRM.`;
                followUpMessageOutput.classList.add('text-green-600');
                followUpForm.reset(); // Clear the form
            } else {
                followUpMessageOutput.textContent = 'Please fill in your Name and Email.';
                followUpMessageOutput.classList.add('text-red-600');
            }

            followUpSpinner.classList.add('hidden');
            followUpForm.querySelector('button[type="submit"]').disabled = false;
        }, 1500); // Wait 1.5 seconds
    });

});
</script>

</body>
</html>
